<!DOCTYPE html>
<html lang="ar">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø§Ù„Ø£ØµÙ†Ø§Ù</title>
<link rel="stylesheet" href="css/style.css"></head>
<body>
<div class="logo card"><img src="assets/logo.png" onerror="this.src='https://via.placeholder.com/48'"><span>ğŸ· Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</span></div>
<div class="app">
  <div class="sidebar card"><a href="index.html">â—€ Ø±Ø¬ÙˆØ¹</a></div>
  <div class="main">
    <div class="card">
      <h3>Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù</h3>
      <div class="controls">
        <input id="it_name" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
        <input id="it_unit" placeholder="Ø§Ù„ÙˆØ­Ø¯Ø©">
        <input id="it_buy" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡">
        <input id="it_sell" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹">
        <button onclick="doAddItem()">Ø¥Ø¶Ø§ÙØ©</button>
      </div>
    </div>

    <div class="card">
      <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ØµÙ†Ø§Ù</h3>
      <table id="itemsTable"><thead><tr><th>#</th><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„ÙˆØ­Ø¯Ø©</th><th>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th><th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th><th>ØªØ­ÙƒÙ…</th></tr></thead><tbody></tbody></table>
    </div>
  </div>
</div>

<script src="js/firebase-config.js"></script>
<script src="js/app.js"></script>
<script>
function renderItemsPage(){
  const tbody=document.querySelector('#itemsTable tbody'); tbody.innerHTML='';
  const items = DB.getItems();
  items.forEach((it,idx)=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td>${idx+1}</td><td>${it.id}</td><td>${it.name}</td><td>${it.unit}</td><td>${Number(it.buy||0).toFixed(2)}</td><td>${Number(it.sell||0).toFixed(2)}</td>
      <td class="actions">
        <button onclick="editItem(${it.id})">ØªØ¹Ø¯ÙŠÙ„</button>
        <button onclick="removeItem(${it.id})">Ø­Ø°Ù</button>
      </td>`;
    tbody.appendChild(tr);
  });
}
function doAddItem(){
  const n=document.getElementById('it_name').value.trim();
  const u=document.getElementById('it_unit').value.trim();
  const b=document.getElementById('it_buy').value;
  const s=document.getElementById('it_sell').value;
  const r=App.addItemApp(n,u,b,s);
  if(r.ok){ alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ†Ù'); document.getElementById('it_name').value='';document.getElementById('it_unit').value='';document.getElementById('it_buy').value='';document.getElementById('it_sell').value=''; renderItemsPage(); App.populateAllSelects(); }
  else alert(r.msg||'Ø®Ø·Ø£');
}
function editItem(id){
  const items=DB.getItems(); const it=items.find(x=>x.id==id); if(!it) return alert('ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
  const name=prompt('Ø§Ù„Ø§Ø³Ù…',it.name); if(name===null) return;
  const unit=prompt('Ø§Ù„ÙˆØ­Ø¯Ø©',it.unit); const buy=prompt('Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡',it.buy||0); const sell=prompt('Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹',it.sell||0);
  App.updateItemApp(id,{name,unit,buy:Number(buy||0),sell:Number(sell||0)}); renderItemsPage(); App.populateAllSelects();
}
function removeItem(id){ if(!confirm('Ø­Ø°Ù Ø§Ù„ØµÙ†ÙØŸ')) return; App.deleteItemApp(id); renderItemsPage(); App.populateAllSelects(); }
initApp().then(renderItemsPage);
</script>
</body>
</html>
