<!DOCTYPE html>
<html lang="ar">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚</title><link rel="stylesheet" href="css/style.css"></head>
<body>
<div class="logo card"><img src="assets/logo.png" onerror="this.src='https://via.placeholder.com/48'"><span>ğŸ’° Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚</span></div>
<div class="app">
  <div class="sidebar card"><a href="index.html">â—€ Ø±Ø¬ÙˆØ¹</a></div>
  <div class="main">
    <div class="card">
      <h3>Ø¥Ø¶Ø§ÙØ© ØµÙ†Ø¯ÙˆÙ‚</h3>
      <input id="tr_name" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚">
      <select id="tr_type"><option value="cash">ØµÙ†Ø¯ÙˆÙ‚ Ù†Ù‚Ø¯ÙŠ</option><option value="bank">Ø­Ø³Ø§Ø¨ Ø¨Ù†ÙƒÙŠ</option></select>
      <button onclick="doAddTreasury()">Ø¥Ø¶Ø§ÙØ©</button>
    </div>
    <div class="card">
      <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚</h3>
      <table id="trTable"><thead><tr><th>#</th><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ø±ØµÙŠØ¯</th><th>ØªØ­ÙƒÙ…</th></tr></thead><tbody></tbody></table>
    </div>
  </div>
</div>

<script src="js/firebase-config.js"></script>
<script src="js/app.js"></script>
<script>
function renderTreasury(){
  const tbody=document.querySelector('#trTable tbody'); tbody.innerHTML=''; const arr=DB.getTreasury();
  arr.forEach((t,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${i+1}</td><td>${t.id}</td><td>${t.name}</td><td>${t.type}</td><td>${Number(t.balance||0).toFixed(2)}</td><td><button onclick="editTreasury(${t.id})">ØªØ¹Ø¯ÙŠÙ„</button></td>`; tbody.appendChild(tr); });
}
function doAddTreasury(){ const n=document.getElementById('tr_name').value.trim(); const type=document.getElementById('tr_type').value; if(!n) return alert('Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨'); App.addTreasuryApp(n,type); document.getElementById('tr_name').value=''; renderTreasury(); App.populateAllSelects(); }
function editTreasury(id){ const arr=DB.getTreasury(); const t=arr.find(x=>x.id==id); if(!t) return; const name=prompt('Ø§Ù„Ø§Ø³Ù…',t.name); if(name===null) return; App.updateTreasuryApp(id,{name}); renderTreasury(); }
initApp().then(renderTreasury);
</script>
</body>
</html>
