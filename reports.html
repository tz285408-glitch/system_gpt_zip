<!DOCTYPE html>
<html lang="ar">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</title><link rel="stylesheet" href="css/style.css"></head>
<body>
<div class="logo card"><img src="assets/logo.png" onerror="this.src='https://via.placeholder.com/48'"><span>ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span></div>
<div class="app">
  <div class="sidebar card"><a href="index.html">â—€ Ø±Ø¬ÙˆØ¹</a></div>
  <div class="main">
    <div class="card">
      <h3>ØªÙ‚Ø§Ø±ÙŠØ± ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
      <table id="repPur"><thead><tr><th>#</th><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="card">
      <h3>ØªÙ‚Ø§Ø±ÙŠØ± ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
      <table id="repSale"><thead><tr><th>#</th><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="card">
      <h3>Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3>
      <button onclick="renderAccountStatement()">Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨</button>
      <pre id="summaryBox" style="white-space:pre-wrap"></pre>
    </div>
  </div>
</div>

<script src="js/firebase-config.js"></script>
<script src="js/app.js"></script>
<script>
function renderReports(){
  const t1=document.querySelector('#repPur tbody'); t1.innerHTML=''; const pur=DB.getPurchases();
  pur.forEach((p,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${i+1}</td><td>${p.invoiceNo}</td><td>${Number(p.net).toFixed(2)}</td><td>${p.payType}</td><td>${p.date} ${p.time}</td>`; t1.appendChild(tr); });
  const t2=document.querySelector('#repSale tbody'); t2.innerHTML=''; const sal=DB.getSales();
  sal.forEach((s,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${i+1}</td><td>${s.invoiceNo}</td><td>${Number(s.net).toFixed(2)}</td><td>${s.payType}</td><td>${s.date} ${s.time}</td>`; t2.appendChild(tr); });
}
function renderAccountStatement(){
  const acc=App.computeAccountStatement();
  let out='Ø­Ø³Ø§Ø¨ | Ù…Ø¯ÙŠÙ† | Ø¯Ø§Ø¦Ù† | Ø§Ù„Ø±ØµÙŠØ¯ | Ø§Ù„Ø­Ø§Ù„Ø©
';
  for(const k of Object.keys(acc)){
    out += `${k} | ${acc[k].debit.toFixed(2)} | ${acc[k].credit.toFixed(2)} | ${acc[k].balance.toFixed(2)} | ${acc[k].status}
`;
  }
  document.getElementById('summaryBox').textContent = out;
}
initApp().then(renderReports);
</script>
</body>
</html>
